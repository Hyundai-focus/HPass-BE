<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hyundai.hpass.mapper.CouponMapper">

    <select id="selectAllCoupon" resultType="com.hyundai.hpass.dto.CouponHistoryDTO">
        SElECT
            coupon_history_no AS couponHistoryNo,
            coupon_no AS couponNo,
            member_no AS memberNo,
            coupon_is_used AS couponIsUsed
        FROM coupon_history
        WHERE member_no = #{memberNo} AND coupon_is_used = '0'
    </select>

    <select id="selectMyCoupon" resultType="com.hyundai.hpass.dto.CouponHistoryDTO">
        SELECT
            coupon_history_no AS couponHistoryNo,
            coupon_no AS couponNo,
            member_no AS memberNo,
            coupon_is_used AS couponIsUsed
        FROM coupon_history
        WHERE coupon_no = #{couponNo} AND member_no = #{memberNo}
    </select>

    <insert id="insertCoupon">
        INSERT INTO coupon_history(coupon_history_no, coupon_no, member_no, coupon_is_used)
        VALUES (coupon_history_seq.NEXTVAL, #{couponNo}, #{memberNo}, 0)
    </insert>

</mapper>